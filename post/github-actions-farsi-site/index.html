<!doctype html><html lang=fa dir=rtl><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>توسعه و میزبانی سایت روی صفحات گیت‌هاب | امنیت و غیره به فارسی</title><meta name=keywords content><meta name=description content="در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه Hugo روی صفحات گیت‌هاب (Github Pages) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم چرخ را دوباره اختراع نکنم.
نگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:
 https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/  چرا گیت‌هاب؟ در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی نمی‌کند."><meta name=author content="پارسیا"><link rel=canonical href=https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/><link href=/parsiya.fa/assets/css/stylesheet.min.d85457619e67d31b97f40ed67c71b5efe0b52508ba759e5a9da0760afd6707db.css integrity="sha256-2FRXYZ5n0xuX9A7WfHG17+C1JQi6dZ5anaB2Cv1nB9s=" rel="preload stylesheet" as=style><link rel=icon href=https://parsiya.github.io/parsiya.fa/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://parsiya.github.io/parsiya.fa/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://parsiya.github.io/parsiya.fa/favicon-32x32.png><link rel=apple-touch-icon href=https://parsiya.github.io/parsiya.fa/apple-touch-icon.png><link rel=mask-icon href=https://parsiya.github.io/parsiya.fa/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.82.0"><link rel=stylesheet href=https://parsiya.github.io/parsiya.fa/css/vazir-font.css><link rel=stylesheet href=https://parsiya.github.io/parsiya.fa/css/custom.css><meta property="og:title" content="توسعه و میزبانی سایت روی صفحات گیت‌هاب"><meta property="og:description" content="در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه Hugo روی صفحات گیت‌هاب (Github Pages) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم چرخ را دوباره اختراع نکنم.
نگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:
 https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/  چرا گیت‌هاب؟ در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی نمی‌کند."><meta property="og:type" content="article"><meta property="og:url" content="https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/"><meta property="og:image" content="https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-04-11T13:25:06-07:00"><meta property="article:modified_time" content="2021-04-11T13:25:06-07:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings.png"><meta name=twitter:title content="توسعه و میزبانی سایت روی صفحات گیت‌هاب"><meta name=twitter:description content="در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه Hugo روی صفحات گیت‌هاب (Github Pages) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم چرخ را دوباره اختراع نکنم.
نگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:
 https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/  چرا گیت‌هاب؟ در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی نمی‌کند."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://parsiya.github.io/parsiya.fa/post/"},{"@type":"ListItem","position":2,"name":"توسعه و میزبانی سایت روی صفحات گیت‌هاب","item":"https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"توسعه و میزبانی سایت روی صفحات گیت‌هاب","name":"توسعه و میزبانی سایت روی صفحات گیت‌هاب","description":"در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه Hugo روی صفحات گیت‌هاب (Github Pages) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم چرخ را دوباره اختراع نکنم.\nنگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:\n https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/  چرا گیت‌هاب؟ در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی نمی‌کند.","keywords":[],"articleBody":"در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه Hugo روی صفحات گیت‌هاب (Github Pages) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم چرخ را دوباره اختراع نکنم.\nنگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:\n https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/  چرا گیت‌هاب؟ در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی نمی‌کند. سایت اصلی من بر روی AWS قرار دارد که متاسفانه در ایران قابل دسترسی نیست. اما صفحات گیت‌هاب علاوه بر مجانی بودن دیگر شامل تحریم نیستند. گیت‌هاب پس از دو سال سر و کله زدن توانسته است مجوز مربوطه را بگیرد.\nچرا Hugo؟ صفحات گیت‌هاب به صورت native از Jekyll پشتیبانی می‌کنند ولی کار با Hugo برای من راحت‌تر است. تقریباً تمام سایتهای من توسط Hugo تولید شده‌اند. اکثر اینstatic website generator ها (مولّد سایت استاتیک؟) روش کاری یکسانی دارند. شما مطالب را با فرمت markdown می‌نویسید و بقیه کار را به آنها می‌سپارید.\nلزومی ندارد حتماً از هوگو و یا جِکیل استفاده کنید، هر مولّدی که با آن راحت‌تر هستید را انتخاب کنید. راهنمای استفاده از آن برای صفحات گیتهاب وجود دارد. خوشبختانه دیگر نیازی به اجرای دستی بسیاری از مراحل نیست و Github actions به کمک ما می‌آیند.\nروش استفاده  کل سایت در یک repository (مخزن؟) گیت در گیت‌هاب ذخیره می‌شود. مطالب را به فرمت markdown می‌نویسید و در یک یا چند کامیت به مخزن اضافه می‌کنید. پس از هر کامیت یک Github action سایت را تولید می‌کند. سایت تولید شده در یک branch (شاخه؟) مجزا ذخیره می‌شود. گیت‌هاب این شاخه را به عنوان یک سایت serve (فارسیش چی میشه؟) می‌کند.  دانش پیشین برای این پست شما باید یکسری موارد را بدانید:\n آشنایی با Hugo (اگر از مولّد سایت دیگری استفاده می‌کنید می‌توانید بخشهای مربوط به Hugo را سرسری رد شوید). آشنایی با گیت  انواع صفحات گیت‌هاب بر روی گیت‌هاب می‌توانیم سه نوع سایت مختلف داشته باشیم:\n سایت کاربر یا user site: هر نام کاربری می‌تواند یک سایت در آدرس username.github.io داشته باشد. سایت سازمان یا organization site: مشابه صفحه کاربر است. مثلاٌ https://microsoft.github.io. سایت پروژه یا project site: هر پروژه می‌تواند یک سایت مجزا داشته باشد. آدرس سایت پروژه وابسته به نام کاربری یا سازمانی است که صاحب اکانت است.  من از سایت فارسی خودم برای مثال استفاده می‌کنم که یک سایت پروژه است:\n آدرس سایت: https://parsiya.github.io/parsiya.fa/ آدرس مخزن سایت: https://github.com/parsiya/parsiya.fa  قالب با متن راست-به-چپ قالب سایت من قابلیت راست-به-چپ ندارد. آن را خودم از Octopress به Hugo منتقل کرده‌ام و از css چیز زیادی نمی‌دانم. تصمیم گرفتم از قالب دیگری استفاده کنم. بعد از چند انتخاب به قالب hugo-PaperMod رسیدم. Hugo از زبانهای مختلف در سایت پشتیبانی می‌کند. معمولاً این برای انتشار نسخه‌های یک صفحه (یا سایت) به چند زبان استفاده می‌شود. شما یک صفحه را به انگلیسی و فارسی می‌نویسید و Hugo بقیه کار را انجام می‌دهد.\nمن تنها می‌خواهم به فارسی بنویسم پس نیازی به استفاده از چند زبان ندارم. این موارد را به config.yml سایتم اضافه کردم:\nlanguageCode: fa defaultContentLanguage: fa languages: fa: languagedirection: rtl weight: 1 استفاده از فونت وزیر کار دیگر استفاده از فونت فارسی وزیر بود. ویرگول از این فونت استفاده می‌کند و من هم می‌خواستم از آن استفاده کنم. خوشبختانه این فونت یک مجوز باز برای استفاده دارد.\nمرحله اول دانلود فونت وزیر و قراردادن آن در دایرکتوری static سایت بود. هر چیزی که در static باشد عیناً به خود سایت اضافه می‌شود. فونت دو بخش دارد یکی خود فایل‌های فونت و دیگر css. اینها را در دایرکتوری‎‌های جداگانه قرار دادم (این کار لزومی ندارد ولی خوشگل‌تر است).\nمرحله دوم اضافه کردن css فونت به قالب بود. در Hugo برای شخصی‌سازی قالب نیازی به دستکاری مستقیم آن نیست. برای اضافه کردن css باید فایل مربوط به بخش head هر صفحه قالب را دستکاری می‌کردم. در این قالب برای دستکاری این بخش می‌توان از فایل extend-head.html استفاده کرد.\nیک کپی از این فایل را در خود سایت ایجاد کردم که در https://github.com/parsiya/parsiya.fa/blob/main/layouts/partials/extend_head.html است. هنگام تولید سایت محتویات این فایل مستقیما به تگ head هر صفحه اضافه می‌شود.\nاستفاده از چنین فایل‌هایی یکی از روش‌های خوب قالب‌ها برای شخصی‌سازی است. اگر چنین فایلی نبود باید کل layout/partials/head.html قالب را کپی و دستکاری می‌کردم (که البته آخر دنیا هم نبود). تا قبل از نوشتن این مقاله از همین روش استفاده کرده بودم.\nایجاد workflow اکنون وقت ایجاد Github action است. برای تولید یک سایت توسط Hugo از راهنمای زیر استفاده کردم (که اشتباهات کوچکی هم داشت):\n https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action  نیازی به دستکاری این فایل نبود و عیناً آن را در مخزن سایت کپی کردم.\n https://github.com/parsiya/parsiya.fa/blob/main/.github/workflows/gh-pages.yml  به طور خلاصه، هر کامیت در شاخه main باعث شروع action می‌شود و سایت را تولید و سپس در شاخه gh-pages ذخیره می‌کند.\nیک نمونه از اجرای این action را می‌توانید در این لینک ببینید. با push کردن کامیتی که حاوی پست جدید (همین پست در بلاگ فارسی است، این action آن را منتشر کرده). روی هر کدام از مراحل مانند Setup Hugo یا Deploy کلیک کنید تا جزئیات را ببینید.\nتنظیمات صفحه گیت‌هاب داخل هر مخزن در بخش settings/pages می‌توان شاخه‌ای که دارای صفحات سایت است را مشخص کرد. این کار را باید بعد از ایجاد شاخه در مخزن انجام دهید چون شاخه‌ای که وجود ندارد را نمی‌توانید انتخاب کنید.\nدامنه شخصی کار من در اینجا تمام شد امّا هر کدام از این سایتها می‌توانند دامنه مخصوص به خود را داشته باشند. مثلاً یکی از سایتهای من به اسم begbounty.com یک سایت پروژه در مخزن https://github.com/parsiya/begbounty.com است. راهنماهای زیادی برای استفاده از دامنه شخصی برای سایت‌های کاربران و سازمانها بود ولی تنظیمات برای سایتهای پروژه نتایج جستجوی زیادی نداشت.\nبرای این کار باید به تنظیمات DNS دامنه خود دسترسی داشته باشید. چند تا از دامنه‌های من در namecheap هستند و این قابلیت را دارند. همه رکوردهای DNS دامنه خود را پاک کنید.\nاول چهار A Record اضافه کردم. host این رکوردها @ و مقدار آنها ip های زیر است:\n 185.199.108.153 185.199.109.153 185.199.110.153 185.199.111.153  سپس یک رکورد CNAME با host با مقدار زیر (نقطه اضافی در آخر مقدار را فراموش نکنید):\nparsiya.github.io. نکته امنیتی: از wildcard در این رکورد CNAME استفاده نکنید. مثلاً ننویسید:\n*.whatever.com اگر چنین تنظیمی داشته باشید هر اکانت گیت‌هاب می‌تواند یک سایت را در subdomain های سایت شما هاست (همون host که نمی‌دونم فارسیش چی میشه) کُنَد. انگلیسی این اخطار را در این صفحه بخوانید.\nکار بعدی رفتن داخل تنظیمات صفحه در گیت‌هاب بود. در بخش Custom Domain دامنه را وارد کردم.\nاین کار یک کامیت جدید تولید می‌کند. این کامیت یک فایل به نام CNAME را به مخزن اضافه می‌کند. مقدار این فایل همان دامنه‌ای است که در بخش قبل استفاده کردیم. صفحات گیت‌هاب از این فایل برای تشخیص دامنه شخصی استفاده می‌کند.\nاگر راهنمای Hugo برای صفحات گیت‌هاب را دنبال کرده باشید یک فایل مشابه در دایرکتوری static مخزن دارید. واقعاً نمی‌دانم هر دوی این فایلها لازم هستند و یا خیر. ولی وقتی سایت کار می‌‎‌کند دستکاری آن فایده‌ای ندارد.\nمشکلات یک مشکل بزرگ عدم پشتیبانی Visual Studio Code از راست-به-چپ است. تقریباً همه نوشته‌های من در این ادیتور است. این کار سرعت من را پایین آورد چون مجبور شدم از ادیتور Notepad++ استفاده کنم. در VS Code من تعداد زیادی snippet و shortcut دارم که سرعتم را زیاد می‌کنند.\nمشکل بعدی انتخاب کم قالب است. قالبهایی که از راست-به-چپ پشتیبانی می‌کنند کم هستند. علاقه زیادی به PaperMod ندارم (قالب خوبی است ولی من دوست ندارم) ولی از بقیه بهتر بود.\nبزرگترین مشکل هم نوشتن به فارسی است که زبانم (دستم؟) نمی‌چرخد. همین معادلسازی یا نیم‌فاصله (ctrl+shift+2) پدر من را درآورده اند 😂.\nچی یاد گرفتم؟ این بخشی است که من در تقریباً همه مقاله‌هایم می‌نویسم.\nیادگرفتم که اگر خواستم بلاگ فارسی بر پایه Hugo در صفحه گیت‌هاب (و با دامنه مخصوص) داشته باشم چکار کنم.\n","wordCount":"1274","inLanguage":"fa","image":"https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings.png","datePublished":"2021-04-11T13:25:06-07:00","dateModified":"2021-04-11T13:25:06-07:00","author":{"@type":"Person","name":"پارسیا"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/"},"publisher":{"@type":"Organization","name":"امنیت و غیره به فارسی","logo":{"@type":"ImageObject","url":"https://parsiya.github.io/parsiya.fa/favicon.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://parsiya.github.io/parsiya.fa/ accesskey=h title="امنیت و غیره به فارسی (Alt + H)">امنیت و غیره به فارسی</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu onscroll=menu_on_scroll()></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://parsiya.github.io/parsiya.fa/>Home</a>&nbsp;»&nbsp;<a href=https://parsiya.github.io/parsiya.fa/post/>Posts</a></div><h1 class=post-title>توسعه و میزبانی سایت روی صفحات گیت‌هاب</h1><div class=post-meta>April 11, 2021&nbsp;·&nbsp;پارسیا</div></header><figure class=entry-cover><img loading=lazy srcset="https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings_hu500af9ee3aba0398ab95b09394766121_34531_360x0_resize_box_2.png 360w ,https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings_hu500af9ee3aba0398ab95b09394766121_34531_480x0_resize_box_2.png 480w ,https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings_hu500af9ee3aba0398ab95b09394766121_34531_720x0_resize_box_2.png 720w ,https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings.png 776w" sizes="(min-width: 768px) 720px, 100vw" src=https://parsiya.github.io/parsiya.fa/post/github-actions-farsi-site/01-pages-settings.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>فهرست مطالب</div></summary><div class=inner><ul><li><a href=#%da%86%d8%b1%d8%a7-%da%af%db%8c%d8%aa%d9%87%d8%a7%d8%a8 aria-label="چرا گیت‌هاب؟">چرا گیت‌هاب؟</a></li><li><a href=#%da%86%d8%b1%d8%a7-hugo aria-label="چرا Hugo؟">چرا Hugo؟</a></li><li><a href=#%d8%b1%d9%88%d8%b4-%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87 aria-label="روش استفاده">روش استفاده</a></li><li><a href=#%d8%af%d8%a7%d9%86%d8%b4-%d9%be%db%8c%d8%b4%db%8c%d9%86 aria-label="دانش پیشین">دانش پیشین</a></li><li><a href=#%d8%a7%d9%86%d9%88%d8%a7%d8%b9-%d8%b5%d9%81%d8%ad%d8%a7%d8%aa-%da%af%db%8c%d8%aa%d9%87%d8%a7%d8%a8 aria-label="انواع صفحات گیت‌هاب">انواع صفحات گیت‌هاب</a></li><li><a href=#%d9%82%d8%a7%d9%84%d8%a8-%d8%a8%d8%a7-%d9%85%d8%aa%d9%86-%d8%b1%d8%a7%d8%b3%d8%aa-%d8%a8%d9%87-%da%86%d9%be aria-label="قالب با متن راست-به-چپ">قالب با متن راست-به-چپ</a></li><li><a href=#%d8%a7%d8%b3%d8%aa%d9%81%d8%a7%d8%af%d9%87-%d8%a7%d8%b2-%d9%81%d9%88%d9%86%d8%aa-%d9%88%d8%b2%db%8c%d8%b1 aria-label="استفاده از فونت وزیر">استفاده از فونت وزیر</a></li><li><a href=#%d8%a7%db%8c%d8%ac%d8%a7%d8%af-workflow aria-label="ایجاد workflow">ایجاد workflow</a></li><li><a href=#%d8%aa%d9%86%d8%b8%db%8c%d9%85%d8%a7%d8%aa-%d8%b5%d9%81%d8%ad%d9%87-%da%af%db%8c%d8%aa%d9%87%d8%a7%d8%a8 aria-label="تنظیمات صفحه گیت‌هاب">تنظیمات صفحه گیت‌هاب</a></li><li><a href=#%d8%af%d8%a7%d9%85%d9%86%d9%87-%d8%b4%d8%ae%d8%b5%db%8c aria-label="دامنه شخصی">دامنه شخصی</a></li><li><a href=#%d9%85%d8%b4%da%a9%d9%84%d8%a7%d8%aa aria-label=مشکلات>مشکلات</a></li><li><a href=#%da%86%db%8c-%db%8c%d8%a7%d8%af-%da%af%d8%b1%d9%81%d8%aa%d9%85 aria-label="چی یاد گرفتم؟">چی یاد گرفتم؟</a></li></ul></div></details></div><div class=post-content><p>در این پست تجربه خودم در راه‌اندازی یک بلاگ فارسی بر پایه <a href=https://gohugo.io>Hugo</a> روی صفحات گیت‌هاب (<a href=https://docs.github.com/en/pages/getting-started-with-github-pages>Github Pages</a>) را می‌نویسم. نوشتن این تجربیات به من کمک می‌کند که اگر در آینده خواستم کاری را تکرار کنم <a href=https://www.dictionary.com/browse/reinvent-the-wheel>چرخ را دوباره اختراع نکنم</a>.</p><p>نگارش انگلیسی این نوشته (با کمی تغییر) را در لینک زیر می‎‌توانید ببینید:</p><ul><li><a href=https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/>https://parsiya.net/blog/2021-02-17-automagically-deploying-websites-with-custom-domains-to-github-pages/</a></li></ul><h2 id=چرا-گیتهاب>چرا گیت‌هاب؟<a hidden class=anchor aria-hidden=true href=#چرا-گیتهاب>#</a></h2><p>در سایت انگلیسی من نمی‌توان فارسی نوشت چون قالب سایت از راست-به-چپ پشتیبانی
نمی‌کند. <a href=https://parsiya.net>سایت اصلی من</a> بر روی AWS قرار دارد که متاسفانه در ایران
قابل دسترسی نیست. اما صفحات گیت‌هاب علاوه بر مجانی بودن <a href=https://github.blog/2021-01-05-advancing-developer-freedom-github-is-fully-available-in-iran/>دیگر شامل تحریم
نیستند</a>. گیت‌هاب پس از دو سال سر و کله زدن توانسته است
مجوز مربوطه را بگیرد.</p><h2 id=چرا-hugo>چرا Hugo؟<a hidden class=anchor aria-hidden=true href=#چرا-hugo>#</a></h2><p>صفحات گیت‌هاب به صورت native <a href=https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll>از Jekyll پشتیبانی
می‌کنند</a> ولی کار با Hugo برای من راحت‌تر است. تقریباً
تمام سایتهای من توسط Hugo تولید شده‌اند. اکثر اینstatic website generator ها
(مولّد سایت استاتیک؟) روش کاری یکسانی دارند. شما مطالب را با فرمت markdown
می‌نویسید و بقیه کار را به آنها می‌سپارید.</p><p>لزومی ندارد حتماً از هوگو و یا جِکیل استفاده کنید، هر مولّدی که با آن راحت‌تر
هستید را انتخاب کنید. راهنمای استفاده از آن برای صفحات گیتهاب وجود دارد.
خوشبختانه دیگر نیازی به اجرای دستی بسیاری از مراحل نیست و Github actions به کمک
ما می‌آیند.</p><h2 id=روش-استفاده>روش استفاده<a hidden class=anchor aria-hidden=true href=#روش-استفاده>#</a></h2><ol><li>کل سایت در یک repository (مخزن؟) گیت در گیت‌هاب ذخیره می‌شود.</li><li>مطالب را به فرمت markdown می‌نویسید و در یک یا چند کامیت به مخزن اضافه می‌کنید.</li><li>پس از هر کامیت یک Github action سایت را تولید می‌کند.</li><li>سایت تولید شده در یک branch (شاخه؟) مجزا ذخیره می‌شود.</li><li>گیت‌هاب این شاخه را به عنوان یک سایت serve (فارسیش چی میشه؟) می‌کند.</li></ol><h2 id=دانش-پیشین>دانش پیشین<a hidden class=anchor aria-hidden=true href=#دانش-پیشین>#</a></h2><p>برای این پست شما باید یکسری موارد را بدانید:</p><ol><li><a href=https://gohugo.io/getting-started/quick-start/>آشنایی با Hugo</a> (اگر از مولّد سایت دیگری استفاده می‌کنید می‌توانید بخشهای مربوط به Hugo را سرسری رد شوید).</li><li>آشنایی با گیت</li></ol><h2 id=انواع-صفحات-گیتهاب>انواع صفحات گیت‌هاب<a hidden class=anchor aria-hidden=true href=#انواع-صفحات-گیتهاب>#</a></h2><p>بر روی گیت‌هاب می‌توانیم <a href=https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages#types-of-github-pages-sites>سه نوع سایت مختلف</a> داشته باشیم:</p><ol><li>سایت کاربر یا user site: هر نام کاربری می‌تواند یک سایت در آدرس <code>username.github.io</code> داشته باشد.</li><li>سایت سازمان یا organization site: مشابه صفحه کاربر است. مثلاٌ <a href=https://microsoft.github.io>https://microsoft.github.io</a>.</li><li>سایت پروژه یا project site: هر پروژه می‌تواند یک سایت مجزا داشته باشد. آدرس سایت پروژه وابسته به نام کاربری یا سازمانی است که صاحب اکانت است.</li></ol><p>من از سایت فارسی خودم برای مثال استفاده می‌کنم که یک سایت پروژه است:</p><ul><li>آدرس سایت: <a href=https://parsiya.github.io/parsiya.fa/>https://parsiya.github.io/parsiya.fa/</a></li><li>آدرس مخزن سایت: <a href=https://github.com/parsiya/parsiya.fa>https://github.com/parsiya/parsiya.fa</a></li></ul><h2 id=قالب-با-متن-راست-به-چپ>قالب با متن راست-به-چپ<a hidden class=anchor aria-hidden=true href=#قالب-با-متن-راست-به-چپ>#</a></h2><p><a href=https://github.com/parsiya/Hugo-Octopress>قالب سایت من</a> قابلیت راست-به-چپ ندارد. آن را خودم از Octopress
به Hugo منتقل کرده‌ام و از css چیز زیادی نمی‌دانم. تصمیم گرفتم از قالب دیگری
استفاده کنم. بعد از چند انتخاب به قالب <a href=https://github.com/adityatelange/hugo-PaperMod>hugo-PaperMod</a> رسیدم.
Hugo از زبانهای مختلف در سایت پشتیبانی می‌کند. معمولاً این برای انتشار نسخه‌های
یک صفحه (یا سایت) به چند زبان استفاده می‌شود. شما یک صفحه را به انگلیسی و فارسی
می‌نویسید و Hugo بقیه کار را انجام می‌دهد.</p><p>من تنها می‌خواهم به فارسی بنویسم پس نیازی به استفاده از چند زبان ندارم. این
موارد را به <code>config.yml</code> سایتم اضافه کردم:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=color:#f92672>languageCode</span>: <span style=color:#ae81ff>fa</span>
<span style=color:#f92672>defaultContentLanguage</span>: <span style=color:#ae81ff>fa</span>

<span style=color:#f92672>languages</span>:
  <span style=color:#f92672>fa</span>:
    <span style=color:#f92672>languagedirection</span>: <span style=color:#ae81ff>rtl</span>
    <span style=color:#f92672>weight</span>: <span style=color:#ae81ff>1</span>
</code></pre></div><h2 id=استفاده-از-فونت-وزیر>استفاده از فونت وزیر<a hidden class=anchor aria-hidden=true href=#استفاده-از-فونت-وزیر>#</a></h2><p>کار دیگر استفاده از فونت فارسی <a href=https://rastikerdar.github.io/vazir-font/>وزیر</a> بود. ویرگول از این فونت
استفاده می‌کند و من هم می‌خواستم از آن استفاده کنم. خوشبختانه این فونت یک مجوز
باز برای استفاده دارد.</p><p>مرحله اول دانلود فونت وزیر و قراردادن آن <a href=https://github.com/parsiya/parsiya.fa/tree/main/static>در دایرکتوری static
سایت</a> بود. هر چیزی که در static باشد عیناً به خود سایت اضافه
می‌شود. فونت دو بخش دارد یکی خود فایل‌های فونت و دیگر css. اینها را در
دایرکتوری‎‌های جداگانه قرار دادم (این کار لزومی ندارد ولی خوشگل‌تر است).</p><p>مرحله دوم اضافه کردن css فونت به قالب بود. در Hugo برای شخصی‌سازی قالب نیازی به
دستکاری مستقیم آن نیست. برای اضافه کردن css باید فایل مربوط به بخش head هر صفحه
قالب را دستکاری می‌کردم. در این قالب برای دستکاری این بخش می‌توان از فایل
<code>extend-head.html</code> استفاده کرد.</p><p>یک کپی از این فایل را در خود سایت ایجاد کردم که در
<a href=https://github.com/parsiya/parsiya.fa/blob/main/layouts/partials/extend_head.html>https://github.com/parsiya/parsiya.fa/blob/main/layouts/partials/extend_head.html</a>
است. هنگام تولید سایت محتویات این فایل مستقیما به تگ head هر صفحه اضافه می‌شود.</p><p>استفاده از چنین فایل‌هایی یکی از روش‌های خوب قالب‌ها برای شخصی‌سازی است. اگر
چنین فایلی نبود باید کل <code>layout/partials/head.html</code> قالب را کپی و دستکاری می‌کردم
(که البته آخر دنیا هم نبود). تا قبل از نوشتن این مقاله <a href=https://github.com/parsiya/parsiya.fa/commit/4b893c994540f20c0de59ddf0df2065a5a3eda07>از همین روش استفاده کرده
بودم</a>.</p><h2 id=ایجاد-workflow>ایجاد workflow<a hidden class=anchor aria-hidden=true href=#ایجاد-workflow>#</a></h2><p>اکنون وقت ایجاد Github action است. برای تولید یک سایت توسط Hugo از راهنمای زیر استفاده کردم (که <a href=https://github.com/gohugoio/hugoDocs/pull/1329#issuecomment-776411651>اشتباهات کوچکی</a> هم داشت):</p><ul><li><a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action>https://gohugo.io/hosting-and-deployment/hosting-on-github/#build-hugo-with-github-action</a></li></ul><p>نیازی به دستکاری این فایل نبود و عیناً آن را در مخزن سایت کپی کردم.</p><ul><li><a href=https://github.com/parsiya/parsiya.fa/blob/main/.github/workflows/gh-pages.yml>https://github.com/parsiya/parsiya.fa/blob/main/.github/workflows/gh-pages.yml</a></li></ul><p>به طور خلاصه، هر کامیت در شاخه <code>main</code> باعث شروع action می‌شود و سایت را تولید و
سپس در شاخه <code>gh-pages</code> ذخیره می‌کند.</p><p>یک نمونه از اجرای این action را می‌توانید در <a href=https://github.com/parsiya/parsiya.fa/runs/2318887782>این لینک</a> ببینید. با push کردن
کامیتی که حاوی پست جدید (همین پست در بلاگ فارسی است، این action آن را منتشر
کرده). روی هر کدام از مراحل مانند Setup Hugo یا Deploy کلیک کنید تا جزئیات را
ببینید.</p><h2 id=تنظیمات-صفحه-گیتهاب>تنظیمات صفحه گیت‌هاب<a hidden class=anchor aria-hidden=true href=#تنظیمات-صفحه-گیتهاب>#</a></h2><p>داخل هر مخزن در بخش <code>settings/pages</code> می‌توان شاخه‌ای که دارای صفحات سایت است را
مشخص کرد. این کار را باید بعد از ایجاد شاخه در مخزن انجام دهید چون شاخه‌ای که
وجود ندارد را نمی‌توانید انتخاب کنید.</p><p><img loading=lazy src=01-pages-settings.png alt="تنظیمات صفحه گیت‌هاب برای سایت من"></p><h2 id=دامنه-شخصی>دامنه شخصی<a hidden class=anchor aria-hidden=true href=#دامنه-شخصی>#</a></h2><p>کار من در اینجا تمام شد امّا هر کدام از این سایتها می‌توانند دامنه مخصوص به خود
را داشته باشند. مثلاً یکی از سایتهای من به اسم <a href=https://begbounty.com>begbounty.com</a> یک سایت پروژه در
مخزن <a href=https://github.com/parsiya/begbounty.com>https://github.com/parsiya/begbounty.com</a> است. راهنماهای زیادی برای استفاده
از دامنه شخصی برای سایت‌های کاربران و سازمانها بود ولی تنظیمات برای سایتهای
پروژه نتایج جستجوی زیادی نداشت.</p><p>برای این کار باید به تنظیمات DNS دامنه خود دسترسی داشته باشید. چند تا از
دامنه‌های من در namecheap هستند و این قابلیت را دارند. همه رکوردهای DNS دامنه
خود را پاک کنید.</p><p>اول چهار <code>A Record</code> اضافه کردم. <code>host</code> این رکوردها <code>@</code> و مقدار آنها ip های زیر است:</p><ul><li>185.199.108.153</li><li>185.199.109.153</li><li>185.199.110.153</li><li>185.199.111.153</li></ul><p>سپس یک <code>رکورد CNAME</code> با <code>host</code> با مقدار زیر (نقطه اضافی در آخر مقدار را فراموش
نکنید):</p><pre><code>parsiya.github.io.
</code></pre><p><strong>نکته امنیتی</strong>: از <code>wildcard</code> در این رکورد <code>CNAME</code> استفاده نکنید. مثلاً ننویسید:</p><pre><code>*.whatever.com
</code></pre><p>اگر چنین تنظیمی داشته باشید هر اکانت گیت‌هاب می‌تواند یک سایت را در subdomain
های سایت شما هاست (همون host که نمی‌دونم فارسیش چی میشه) کُنَد. انگلیسی این
اخطار را در <a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site>این صفحه</a> بخوانید.</p><p>کار بعدی رفتن داخل تنظیمات صفحه در گیت‌هاب بود. در بخش <code>Custom Domain</code> دامنه را
وارد کردم.</p><p><img loading=lazy src=02-pages-settings-begbounty.png alt="تنظیمات صفحه گیت‌هاب begbounty.com"></p><p>این کار یک کامیت جدید تولید می‌کند. این کامیت یک فایل به نام <code>CNAME</code> را به مخزن
اضافه می‌کند. مقدار این فایل همان دامنه‌ای است که در بخش قبل استفاده کردیم.
صفحات گیت‌هاب از این فایل برای تشخیص دامنه شخصی استفاده می‌کند.</p><p>اگر راهنمای Hugo برای صفحات گیت‌هاب را دنبال کرده باشید <a href=https://github.com/parsiya/begbounty.com/blob/main/static/CNAME>یک فایل مشابه در دایرکتوری static مخزن دارید</a>. واقعاً نمی‌دانم هر دوی این فایلها لازم هستند و یا خیر. ولی وقتی سایت کار می‌‎‌کند <a href=https://en.wiktionary.org/wiki/if_it_ain%27t_broke,_don%27t_fix_it>دستکاری آن فایده‌ای ندارد</a>.</p><h2 id=مشکلات>مشکلات<a hidden class=anchor aria-hidden=true href=#مشکلات>#</a></h2><p>یک مشکل بزرگ عدم پشتیبانی Visual Studio Code از راست-به-چپ است. تقریباً همه
نوشته‌های من در این ادیتور است. این کار سرعت من را پایین آورد چون مجبور شدم از
ادیتور Notepad++ استفاده کنم. در VS Code من تعداد زیادی snippet و shortcut دارم
که سرعتم را زیاد می‌کنند.</p><p>مشکل بعدی انتخاب کم قالب است. قالبهایی که از راست-به-چپ پشتیبانی می‌کنند کم
هستند. علاقه زیادی به PaperMod ندارم (قالب خوبی است ولی من دوست ندارم) ولی از
بقیه بهتر بود.</p><p>بزرگترین مشکل هم نوشتن به فارسی است که زبانم (دستم؟) نمی‌چرخد. همین معادلسازی یا
نیم‌فاصله (<code>ctrl+shift+2</code>) پدر من را درآورده اند 😂.</p><h2 id=چی-یاد-گرفتم>چی یاد گرفتم؟<a hidden class=anchor aria-hidden=true href=#چی-یاد-گرفتم>#</a></h2><p>این بخشی است که من در تقریباً همه مقاله‌هایم می‌نویسم.</p><p>یادگرفتم که اگر خواستم بلاگ فارسی بر پایه Hugo در صفحه گیت‌هاب (و با دامنه
مخصوص) داشته باشم چکار کنم.</p></div><footer class=post-footer></footer></article></main><footer class=footer><span>تحت مجوز <a href=https://creativecommons.org/licenses/by-nc/4.0/>کریتیو کامنز اختیار-غیرتجاری 4.0 بین‌المللی</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/parsiya.fa/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>